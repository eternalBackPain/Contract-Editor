
## Intro

I want to create a markup syntax tailored to contract drafting.

### Background to different markup languages

Each markup language uses their own 'tags' to control the structure, presentation or description of data (which in most cases, would be text).

| Markup language                                    | Example tags                                                                             | Advantages                                                                          | Disadvantages                                                 |
| -------------------------------------------------- | ---------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- | ------------------------------------------------------------- |
| [Markdown](https://en.wikipedia.org/wiki/Markdown) | `# Heading text`, `## Heading text`, and `### Heading text`                              | Lightweight and easy to read                                                        | Too simple                                                    |
| [HTML](https://en.wikipedia.org/wiki/HTML)         | `<h1>Heading text</h1>`, `<h2>Heading text</h2>` and `<h3>Heading text</h3>`             | Designed for the web browser                                                        | Not semantically appropriate for contracts                    |
| [LaTeX](https://simple.wikipedia.org/wiki/LaTeX)   | `\section{Heading text}`, `\subsection{Heading text}` and `\subsubsection{Heading text}` | Purpose-built for scientific papers                                                 | Typesetting specific to scientific articles and not contracts |
| [XML](https://en.wikipedia.org/wiki/XML)           | `<heading level="1">`, `<heading level="2">`                                             | Used for storing and transmitting data; extensible (i.e. design your own structure) | Too complex for a lawyer to code from scratch                 |
[This video](https://www.youtube.com/watch?v=P-7hwjocEpM&ab_channel=WritetheDocs) discusses the history of markup languages from the perspective of writing documentation, providing examples of tags they've used and their use cases.

### Closest contract-specific markup language I could find

Most markup languages for contractual drafting focus on creating Smart Legal Contracts (i.e. self-executing contracts). For a lawyer, this is unnecessary 99.99% of the time and adds unnecessary complexity to programmatic contractual drafting. 

The closest markup syntax I have found to what I want to do is within the Accord project, named [CiceroMark](https://docs.accordproject.org/docs/markup-ciceromark.html) and [TemplateMark](https://docs.accordproject.org/docs/markup-templatemark.html). 

CiceroMark allows for the parsing of clauses, such as the below:

```
{{#clause payment}} 
Payment 
------- 
As consideration in full for the rights granted herein, Licensee shall pay Licensor a one-time fee in the amount of "one hundred US Dollars" (100.0 USD) upon execution of this Agreement, payable as follows: "bank transfer". 
{{/clause}} 
```

TemplateMark allows for defining variables, such as defined terms:

`Upon the signing of this Agreement, {{buyer}} shall pay {{amount}} to {{seller}}.`

However, that is the extent of what you can do with that markup (other functionality is not necessarily useful for a non-smart contract).

### Goals

To develop a markup syntax, I need to follow these steps:
1. Design the syntax
2. Define a grammar
3. Develop a parser
	1. Lexer: break input into tokens
	2. Parse tree: tree-like structure that represents nested elements and relationships
4. Develop a renderer

Note: I do not want to create a Domain Specific Language (**DSL**). A DSL is an expressive, compact way to describe operations, configurations, or behaviors in that domain (for example, SQL for databases, Regular Expressions for pattern matching, or Terraform for infrastructure as code). A markup syntax, rather, is used to describe or annotate the structure and presentation of content. It focuses on organising and representing data or documents. Developing a DSL to simply draft contracts would be overkill as logic, conditionals, loops and expressions are not necessary when drafting contracts.

## Design of the syntax

After much thought, I have settled on the below syntax for now.

Assume you wish to draft the following clauses (taken from the NSW Government's [MICTA/ICTA contracting framework](https://www.info.buy.nsw.gov.au/resources/micta-icta)):

![[Pasted image 20241228135742.png]]

### Example markup syntax

The corresponding markup syntax would appear as follows:

```
Define "Contract Authority" as {
    means the relevant authority or agency executing this agreement...
}

Define "MICTA" as {
    means the master ICT agreement...
}
    
Define "Supplier" as {
    means the entity providing goods, services and/or other activities...
}

Define "Order Proposal" as {
    means a document proposing specific goods, services and/or other activities...
}

Define "Contract" as {
    means any contract formed under or related to this arrangement...
}

Define "Supplier's Activities" as {
    means the activities the {{Supplier}} undertakes under this agreement...
}

Define "ICT Activities" as {
    means any information, communications and technology-related activities...
}

Define "Eligible Customer" as {
    means any customer eligible to place orders under this agreement...
}

# No guarantee of work or exclusivity {
    The {{Contract Authority}} is not, by executing this {{MICTA}}:

    ## bound to issue any {{Order Proposal}} to the {{Supplier}};

    ## bound to engage the {{Supplier}} to supply any goods, services and/or
        other activities or to enter into any {{Contract}}; or

    ## restricted in any way from engaging any other person to supply any goods,
        services and/or other activities:
        
        ### of any type, including goods, services and/or other activities that                are the same as or similar to any {{Supplier's Activities}} or {{ICT               Activities}}; or

        ### at any location where, or in respect of any project that, the 
            {{Supplier}} may be required to supply goods, services and/or 
            other activities.
} 

# No representation {
    Clause {{noGuaranteeOfWorkOrExclusivity}} applies even though the 
    {{Contract Authority}} may have provided the {{Supplier}} with a forecast or 
    estimate of the goods, services, {{ICT Activities}} and/or other activities 
    that the {{Contract Authority}} or any {{Eligible Customer}} may require at 
    any time. The {{Supplier}} acknowledges that any forecasts or estimates do 
    not constitute a representation of the goods, services and/or other activities 
    the {{Contract Authority}} or any {{Eligible Customer}} may require in any period.
}
```

### Example parsed markup syntax as JSON

The markup syntax would then be parsed as the following JSON:

```
{
    "metadata": {
      "title": "Sample Master Contract",
      "version": "1.0",
      "createdAt": "2024-12-31T10:00:00Z",
      "lastModified": "2024-12-31T11:15:00Z",
      "author": "Jane Lawyer"
    },
    "definitions": [
      {
        "termName": "Contract Authority",
        "definition": "means the entity that executes this agreement...",
        "references": []
      },
      {
        "termName": "Supplier",
        "definition": "means the party providing goods or services...",
        "references": ["Eligible Customer"]
      }
    ],
    "clauses": [
      {
        "id": "noGuaranteeOfWork",
        "title": "No Guarantee of Work or Exclusivity",
        "content": "The {{Contract Authority}} is not, by executing this {{MICTA}}: ...",
        "references": ["Contract Authority", "MICTA"],
        "subclauses": [
          {
            "id": "",
            "title": "",
            "content": "bound to issue any {{Order Proposal}}...",
            "references": ["Order Proposal"],
            "subclauses": []
          },
          {
            "id": "",
            "title": "",
            "content": "bound to engage the {{Supplier}} to supply any goods...",
            "references": ["Supplier"],
            "subclauses": []
          }
        ]
      },
      {
        "id": "noRepresentation",
        "title": "No Representation",
        "content": "Clause {{noGuaranteeOfWork}} applies even though...",
        "references": ["noGuaranteeOfWork"],
        "subclauses": []
      }
    ]
  }
```


## Formal Grammar

JNAO note: I am still debating whether to go through the trouble of defining a formal grammar (e.g. Extended Backus–Naur Form (EBNF)) and parsing a ASL tree, or whether I can just develop an extension to markdown.

